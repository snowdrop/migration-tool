- category: mandatory
  customVariables: []
  description: SpringBoot to Quarkus
  effort: 1
  labels:
    - konveyor.io/source=springboot
    - konveyor.io/target=quarkus
  links: []
  message: "SpringBoot to Quarkus."
  ruleID: 010-springboot-replace-bom-quarkus
  when:
    condition: java.annotation is 'org.springframework.boot.autoconfigure.SpringBootApplication'
  order: 1
  instructions:
    ai:
      - tasks:
          - "Add to the pom.xml file the Quarkus BOM dependency version 3.31.3 within the dependencyManagement section and the following dependencies: quarkus-arc, quarkus-core and quarkus-smallrye-openapi"
          - "Remove next from the Ã´pm.xml the plugin org.springframework.boot:spring-boot-maven-plugin"
          - "Add to each spring boot dependency, the version 3.5.5 within the pom.xml"
          - "Add the Quarkus Maven Plugin and enable it by adding <extensions>true</extensions>"
          - "Finally remove the spring-boot-starter-parent"
          - "Remove the spring-snapshots, spring-milestones repositories as we just need maven central for quarkus"
    manual:
      - todo: "Add the Quarkus BOM and quarkus-arc, quarkus-core dependencies within the pom.xml file"
    openrewrite:
      - name: Replace the SpringBoot parent dependency with Quarkus BOM within the pom.xml file
        description: Replace the SpringBoot parent dependency with Quarkus BOM within the pom.xml file.
        recipeList:
          - org.openrewrite.maven.AddManagedDependency:
              groupId: io.quarkus.platform
              artifactId: quarkus-bom
              version: 3.31.3
              type: pom
              scope: import
              addToRootPom: false
          - org.openrewrite.maven.AddDependency:
              groupId: io.quarkus
              artifactId: quarkus-core
              version: 3.31.3
          - org.openrewrite.maven.AddDependency:
              groupId: io.quarkus
              artifactId: quarkus-arc
              version: 3.31.3
          - org.openrewrite.maven.AddDependency:
              groupId: io.quarkus
              artifactId: quarkus-smallrye-openapi
              version: 3.31.3
          - org.openrewrite.maven.RemovePlugin:
              groupId: org.springframework.boot
              artifactId: spring-boot-maven-plugin
          - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
              groupId: org.springframework.boot
              artifactId: "*"
              newVersion: 3.5.8
              overrideManagedVersion: "true"
          - dev.snowdrop.mtool.openrewrite.recipe.spring.AddQuarkusMavenPlugin
          - org.openrewrite.quarkus.spring.RemoveSpringBootParent
        gav:
          - dev.snowdrop.mtool:openrewrite-recipes:1.0.5-SNAPSHOT
          - org.openrewrite:rewrite-maven:8.73.0
          - org.openrewrite:rewrite-java:8.73.0
          - org.openrewrite.recipe:rewrite-java-dependencies:1.46.0
          - org.openrewrite.recipe:rewrite-spring-to-quarkus:0.3.1





