- category: mandatory
  customVariables: []
  description: SpringBoot to Quarkus
  effort: 1
  labels:
    - konveyor.io/source=springboot
    - konveyor.io/target=quarkus
  links: []
  message: "SpringBoot to Quarkus."
  ruleID: 030-springboot-to-quarkus-add-sql
  when:
    condition: |
      properties.key is 'spring.datasource.*' OR properties.key is 'spring.jpa.*'
  order: 5
  instructions:
    ai:
      - tasks:
          - "TODO"
    manual:
      - todo: "See openrewrite instructions"
    openrewrite:
      - name: SpringBoot to Quarkus
        description: Add a SQL file to create records
        gav:
          - dev.snowdrop.mtool:openrewrite-recipes:1.0.5-SNAPSHOT
          - org.openrewrite:rewrite-java:8.73.0
        recipeList:
          - org.openrewrite.java.AddOrUpdateAnnotationAttribute:
              annotationType: jakarta.persistence.GeneratedValue
              attributeName: strategy
              attributeValue: GenerationType.IDENTITY
          - org.openrewrite.text.CreateTextFile:
              relativeFileName: src/main/resources/import.sql
              overwriteExisting: true
              fileContents: |
                INSERT INTO tasks(id, title, description) VALUES (1, 'Migration to Quarkus - step 1', 'Prepare the migration to Quarkus. Step 1');
                INSERT INTO tasks(id, title, description) VALUES (2, 'Migration to Quarkus - step 2', 'Prepare the migration to Quarkus. Step 2');