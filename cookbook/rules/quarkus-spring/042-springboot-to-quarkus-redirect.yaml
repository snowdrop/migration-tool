- category: mandatory
  customVariables: []
  description: SpringBoot to Quarkus
  effort: 1
  labels:
    - konveyor.io/source=springboot
    - konveyor.io/target=quarkus
  links: []
  message: "SpringBoot to Quarkus."
  ruleID: 042-springboot-to-quarkus-redirect
  when:
    condition: |
      java.annotation is 'org.springframework.stereotype.Controller'
  order: 8
  instructions:
    ai:
      - tasks:
          - "Read the file src/main/java/com/todo/app/controller/TaskController.java. Modify the viewIndexPage() method: change the return type from String to RestResponse<String> (from org.jboss.resteasy.reactive.RestResponse), replace the method body with: return RestResponse.temporaryRedirect(new URI(\"/home\")); Add the throws URISyntaxException clause to the method signature. Add the necessary imports: java.net.URI, java.net.URISyntaxException, org.jboss.resteasy.reactive.RestResponse. Write the updated file."
    manual:
      - todo: "See openrewrite instructions"
    openrewrite:
      - name: SpringBoot to Quarkus
        description: Adapt the REST GET /home endpoint as we don't support Model view of Spring Boot
        recipeList:
          - dev.snowdrop.mtool.openrewrite.recipe.java.ReplaceMethodBodyContent:
              methodPattern: "com.todo.app.controller.TaskController viewIndexPage(..)"
              replacement: |
                return RestResponse.temporaryRedirect(new URI("/home"));
              newImports: java.net.URI
          - dev.snowdrop.mtool.openrewrite.recipe.java.ChangeMethodReturnType:
              methodPattern: "com.todo.app.controller.TaskController viewIndexPage(..)"
              newReturnType: "org.jboss.resteasy.reactive.RestResponse<String>"
          - dev.snowdrop.mtool.openrewrite.recipe.java.AddThrowMethodException:
              methodPattern: "com.todo.app.controller.TaskController viewIndexPage(..)"
              newException: java.net.URISyntaxException
        gav:
        - dev.snowdrop.mtool:openrewrite-recipes:1.0.5-SNAPSHOT
        - org.openrewrite:rewrite-java:8.71.0
