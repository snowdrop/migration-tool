- category: mandatory
  customVariables: []
  description: SpringBoot to Quarkus
  effort: 1
  labels:
    - konveyor.io/source=springboot
    - konveyor.io/target=quarkus
  links: []
  message: "SpringBoot to Quarkus."
  ruleID: 042-springboot-to-quarkus-redirect
  when:
    condition: |
      java.annotation is 'org.springframework.stereotype.Controller'
  order: 8
  instructions:
    ai:
      - tasks:
          - "TODO"
    manual:
      - todo: "See openrewrite instructions"
    openrewrite:
      - name: SpringBoot to Quarkus
        description: Adapt the REST GET /home endpoint as we don't support Model view of Spring Boot
        recipeList:
          - dev.snowdrop.mtool.openrewrite.recipe.ReplaceMethodBodyContent:
              methodPattern: "com.todo.app.controller.TaskController viewIndexPage(..)"
              replacement: |
                return RestResponse.temporaryRedirect(new URI("/home"));
              newImports: java.net.URI
          - dev.snowdrop.mtool.openrewrite.recipe.ChangeMethodReturnType:
              methodPattern: "com.todo.app.controller.TaskController viewIndexPage(..)"
              newReturnType: "org.jboss.resteasy.reactive.RestResponse<String>"
          - dev.snowdrop.mtool.openrewrite.recipe.AddThrowMethodException:
              methodPattern: "com.todo.app.controller.TaskController viewIndexPage(..)"
              newException: java.net.URISyntaxException
        gav:
        - dev.snowdrop:openrewrite-recipes:1.0.2-SNAPSHOT
        - org.openrewrite:rewrite-java:8.67.1
